<!DOCTYPE html>
<html lang="en">
<head>
<title>Team Seedling Tetris main page</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
* {
  box-sizing: border-box;
}

body {
  font-family: Arial, Helvetica, sans-serif;
}

/* Style the header */
header {
  background-color: #505;
  padding: 30px;
  text-align: center;
  font-size: 35px;
  color: white;
}

/* Create two columns/boxes that floats next to each other */
nav {
  float: left;
  width: 20%;
  height: 3000px; /* should be changed later */
  background: #ccc;
  padding: 20px;
}

/* Style the list inside the menu */
nav ul {
  list-style-type: disc;
  padding: 0;
}

article {
  float: left;
  padding: 20px;
  width: 70%;
  background-color: #f1f1f1;
  height: auto; /* only for demonstration, should be removed */
}

/* Clear floats after the columns */
section::after {
  content: "";
  display: table;
  clear: both;
}

/* Style the footer */
footer {
  background-color: #777;
  padding: 10px;
  text-align: center;
  color: white;
}

/* Responsive layout - makes the two columns/boxes stack on top of each other instead of next to each other, on small screens */
@media (max-width: 600px) {
  nav, article {
    width: 100%;
    height: auto;
  }
}

/* table stype */
table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
}

tr:nth-child(even) {
  background-color: #dddddd;
}

</style>
</head>
<body>


<header>
  <h2>Tetris</h2>
</header>

<section>
  <nav>
    <ul>
      <li><a href="#Overview">Overview</a></li>
      <li><a href="#Project Instruction">Project Instruction</a></li>
      <li><a href="#Development stage">Development stage</a></li>
      <li><a href="#Troubleshooting / possible improvement">Troubleshooting / possible improvement</a></li>
      <li><a href="#Contact">Contact</a></li>
    </ul>
  </nav>

  <div id='Overview'>
    <article>
      <h1>Overview</h1>
      <p>This project is ...</p>

    </article>
  </div>

  <div id='Project Instruction'>
    <article>
      <h1>Project Instruction</h1>
      <p> Here is a table of all necessary parts of this project:</p>
      <table>
        <tr>
          <th>Part name</th>
          <th>QTY</th>
          <th>Image</th>
        </tr>

        <tr>
          <th>Arduino UNO board</th>
          <th>1</th>
          <th><img src="media/arduino_UNO.png" alt="" border="3" height="100" width="100" /></th>
        </tr>

        <tr>
          <th>Adafruit 32 * 16 RGB LED Matrix</th>
          <th>1</th>
          <th><img src="media/Matrix.png" alt="" border="3" height="100" width="100" /></th>
        </tr>

        <tr>
          <th>female DC power adapter(for LED Matrix)</th>
          <th>1</th>
          <th><img src="media/female_DC_adapter.png" alt="" border="3" height="100" width="100" /></th>
        </tr>

        <tr>
          <th>5V 200m power supply</th>
          <th>1</th>
          <th><img src="media/5V_200m_power supply.png" alt="" border="3" height="100" width="100" /></th>
        </tr>

        <tr>
          <th>Arduino joystick</th>
          <th>1</th>
          <th><img src="media/joystick.png" alt="" border="3" height="100" width="100" /></th>
        </tr>

        <tr>
          <th>passive buzzer</th>
          <th>1</th>
          <th><img src="media/passive_buzzer.png" alt="" border="3" height="100" width="100" /></th>
        </tr>

        <tr>
          <th>push button</th>
          <th>1</th>
          <th><img src="media/push_button.png" alt="" border="3" height="100" width="100" /></th>
        </tr>

        <tr>
          <th>Jump wires (both male and female header)</th>
          <th>20+</th>
          <th><img src="media/jump_wire.png" alt="" border="3" height="100" width="100" /></th>
        </tr>

      </table>
      <p>Since there's more than one version of LED matrix avaliable. Those matrix pannel may have different version of connections.
        Please refer to <a href="https://learn.adafruit.com/32x16-32x32-rgb-led-matrix/new-wiring">this page</a> for your specific
        pannel. For my case, here's a table of all my connections:
      </p>
      <table>
        <tr>
          <th>Part Name</th>
          <th>Part Pin</th>
          <th>Arduino UNO Pin</th>
        </tr>

        <tr>
          <th>joystick</th>
          <th>VRx</th>
          <th>A3</th>
        </tr>

        <tr>
          <th>joystick</th>
          <th>VRy</th>
          <th>A4</th>
        </tr>

        <tr>
          <th>passive buzzer</th>
          <th>Postive leg</th>
          <th>Pin 11</th>
        </tr>

        <tr>
          <th>push button</th>
          <th>\</th>
          <th>Pin 12</th>
        </tr>

        <tr>
          <th>RGB matrix</th>
          <th>R1, G1, B1</th>
          <th>Pin 2,3,4</th>
        </tr>

        <tr>
          <th>RGB matrix</th>
          <th>R2, G2, B2</th>
          <th>Pin 5,6,7</th>
        </tr>

        <tr>
          <th>RGB matrix</th>
          <th>Row Select A, B, C</th>
          <th>A0, A1, A2</th>
        </tr>

        <tr>
          <th>RGB matrix</th>
          <th>CLK</th>
          <th>Pin 8</th>
        </tr>

        <tr>
          <th>RGB matrix</th>
          <th>Output Enable</th>
          <th>Pin 9</th>
        </tr>

        <tr>
          <th>RGB matrix</th>
          <th>Latch/STB</th>
          <th>Pin 10</th>
        </tr>

      </table>
      <p>
        All the other pins that are not mentioned here can be ignored. Notice that the pin connections of RGB matrix pannel
        can be quite tricky. Please refer to <a href="https://learn.adafruit.com/32x16-32x32-rgb-led-matrix/connecting-with-jumper-wires">this page</a>
        to double check your wiriting if your matrix pannel failed to work as expected.
      </p>
      <p> The full circuit looks like this:</p>
      <img src="media/all_parts.jpg" alt="" border="3" height="500" width="900" class = "center"/>
    </article>
  </div>

  <div id='Development stage'>
    <article>
      <h1>Development stage</h1>
      <p>Here is the very first block diagram from the purposing day: </p>
      <img src="media/block_diagram.PNG" alt="" border="3" height="500" width="900" class = "center"/>
      <p>
        I started with RP2040 and use MAX7219 as the tetris playground. And build the first version of this project with the ability to create seven different blocks,
        and be able to move and rotate them as they fall from the top of the matrix.
      </p>
      <img src="media/parts.jpg" alt="" border="3" height="300" width="500" class = "center"/>
      <p>The basic block rotate and block creation algorithm was also created back then</p>
        <img src="media/block_diagram.PNG" alt="" border="3" height="500" width="900" class = "center"/>
      <p>Here's the Mid point demo video created with this set of parts</p>
      <video width="500" height="300" autoplay>
        <source src="media/MVP_demo.MOV" type="video/mov">
      Your browser does not support the video tag.
      </video>
      <p>
        Later on, due to the restrictions of MAX7219, I swicthed to adafruit 32*16 LED RGB Pannel to have enough space for the game play. To access that many digital/analog pins,
         arduino UNO is used. 
      </p>

    </article>
  </div>

  <div id='Troubleshooting / possible improvement'>
    <article>
      <h1>Troubleshooting / possible improvement</h1>
      <ul id="01">
        <li>
          For some reason, the push key on my joystick would occisionaly return arbitary values no matter if it is pressed or not. I have to use a extra push button
          button as shown above to perform the restart function. It is possible to connect the Button Pin to the SW connection of joystick instead of an external
          push button to perfrom the same function.
        </li>
        <li>
          The original design includes the theme music of Tetris while playing. I have managed to perfrom the play part and music part seperately. Howeverm the set
            up function of RGB Matrix somehow may affect the clk rate of buzzer, and twists the rythm badly. Hence this function is not included in this project.
            Instead, sound effect are played for block rotation, line erasing, and some other operations.
        </li>
        <li>
          The notation of digital cable input can be confusing. All digital Pins should be connected as symmetric as those notations shown on the RGB matrix.
        </li>
      </ul>
      </article>
  </div>

  <div id='Contact'>
    <article>
      <h1>Contact</h1>
      <p>Here's the link to the author's repo along with contact information:</p>
      <p><a href="https://github.com/shux3">shu's repo</a></p>
      <p>Email: Xu1997David@gmail.com</p>
    </article>
  </div>

</section>



<footer>
  <p>University of pennsylvania ESE 5190 2022 Fall Final project - team Seedling</p>
</footer>

</body>
</html>
